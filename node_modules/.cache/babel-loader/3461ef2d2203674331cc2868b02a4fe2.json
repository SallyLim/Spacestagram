{"ast":null,"code":"import _slicedToArray from\"/Users/sallylim/Desktop/Projects/spacestagram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./phototile.css';import React,{useState,useEffect}from\"react\";import Heart from'../../component/heart';import Loading from'../../component/loading';import Description from'./description';import PageNumbers from'./pageNumbers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PhotoTile(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),photo=_useState2[0],setPhoto=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var regex=/(jpg)$/;var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),pageNum=_useState6[0],setPageNum=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),likedFilterButton=_useState8[0],setLikedFilterButton=_useState8[1];useEffect(function(){if(likedFilterButton){setPhoto(JSON.parse(localStorage.getItem('heart')));return;}setLoading(true);var today=new Date();var start_date=new Date();var end_date=new Date();start_date.setDate(today.getDate()-15*(pageNum-1));end_date.setDate(today.getDate()-15*pageNum);var url=\"https://api.nasa.gov/planetary/apod?start_date=\"+end_date.toISOString().split(\"T\")[0]+\"&end_date=\"+start_date.toISOString().split(\"T\")[0]+\"&api_key=yJo04DZWQAhSHxCuIhKu79dvkJee25Kx0J5n43Pw\";fetch(url).then(function(result){return result.json();}).then(function(json){setLoading(false);setPhoto(json);});},[pageNum,likedFilterButton]);return/*#__PURE__*/_jsxs(\"div\",{class:\"page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter_button_wrapper\",children:/*#__PURE__*/_jsx(\"button\",{className:\"filter_button \".concat(likedFilterButton?\"filter_button_active\":\"\"),onClick:function onClick(click){return setLikedFilterButton(!likedFilterButton);},children:\"Filter by Liked\"})}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:photo.filter(function(photo){return regex.test(photo.url);}).sort(function(a,b){return new Date(b.date)-new Date(a.date);}).map(function(single_photo){return/*#__PURE__*/_jsxs(\"div\",{className:\"tile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tile_photos_wrapper\",children:/*#__PURE__*/_jsx(\"img\",{className:\"tile_photos\",src:single_photo.url,width:\"350\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tile_header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"tile_title\",children:single_photo.title}),/*#__PURE__*/_jsx(Heart,{photo:single_photo})]}),/*#__PURE__*/_jsx(Description,{text:single_photo.explanation}),/*#__PURE__*/_jsx(\"p\",{className:\"date\",children:single_photo.date})]})]});})}),/*#__PURE__*/_jsx(PageNumbers,{pageNum:pageNum,setPageNum:setPageNum})]});}//format photo tile part out","map":{"version":3,"sources":["/Users/sallylim/Desktop/Projects/spacestagram/src/pages/gallery/phototile.js"],"names":["React","useState","useEffect","Heart","Loading","Description","PageNumbers","PhotoTile","props","photo","setPhoto","loading","setLoading","regex","pageNum","setPageNum","likedFilterButton","setLikedFilterButton","JSON","parse","localStorage","getItem","today","Date","start_date","end_date","setDate","getDate","url","toISOString","split","fetch","then","result","json","click","filter","test","sort","a","b","date","map","single_photo","title","explanation"],"mappings":"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","sourcesContent":["import './phototile.css';\nimport React, { useState, useEffect } from \"react\";\nimport Heart from '../../component/heart';\nimport Loading from '../../component/loading';\nimport Description from './description';\nimport PageNumbers from './pageNumbers';\n\nexport default function PhotoTile(props) {\n    const [photo, setPhoto] = useState([])\n    const [loading, setLoading] = useState(true)\n    const regex = /(jpg)$/\n    const [pageNum, setPageNum] = useState(1)\n    const [likedFilterButton, setLikedFilterButton] = useState(false)\n\n    useEffect(() => {\n        if (likedFilterButton) {\n            setPhoto(JSON.parse(localStorage.getItem('heart')))\n            return\n        }\n        setLoading(true)\n        const today = new Date();\n        const start_date = new Date();\n        const end_date = new Date();\n        start_date.setDate(today.getDate() - 15 * (pageNum - 1));\n        end_date.setDate(today.getDate() - 15 * pageNum);\n        let url = \"https://api.nasa.gov/planetary/apod?start_date=\" +\n            end_date.toISOString().split(\"T\")[0] + \"&end_date=\" +\n            start_date.toISOString().split(\"T\")[0] +\n            \"&api_key=yJo04DZWQAhSHxCuIhKu79dvkJee25Kx0J5n43Pw\"\n\n        fetch(url)\n            .then(result => result.json())\n            .then(json => {\n                setLoading(false)\n                setPhoto(json)\n            });\n    }, [pageNum, likedFilterButton])\n\n    return (\n        <div class=\"page\">\n                <div className=\"filter_button_wrapper\">\n                    <button \n                    className={`filter_button ${likedFilterButton ? `filter_button_active` : ``}`}\n                    onClick={click => setLikedFilterButton(!likedFilterButton)}>\n                    Filter by Liked\n                    </button>\n                </div>\n                {loading ? <Loading /> :\n                <div className=\"flex\">\n                    {photo\n                        .filter(photo => regex.test(photo.url))\n                        .sort((a, b) => \n                            new Date(b.date) - new Date(a.date))\n                        .map(single_photo => (\n                            <div className=\"tile\">\n                                <div className=\"tile_photos_wrapper\">\n                                    <img className=\"tile_photos\" src={single_photo.url} width=\"350\"/>\n                                </div>\n                                <div className=\"text\">\n                                    <div className=\"tile_header\">\n                                        <h2 className=\"tile_title\">{single_photo.title}</h2>\n                                        <Heart photo={single_photo} />\n                                    </div>\n                                    <Description text={single_photo.explanation} />\n                                    <p className=\"date\">{single_photo.date}</p>\n                                </div>\n                            </div>\n                        ))}\n                </div>}\n            <PageNumbers pageNum={pageNum} setPageNum={setPageNum} />\n        </div>\n    )\n\n} //format photo tile part out"]},"metadata":{},"sourceType":"module"}